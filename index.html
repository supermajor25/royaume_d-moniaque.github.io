<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Rituel d'invocation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
     --bg-dark: #000000;
  --red: #a50000;             /* rouge plus vif que #8b0000 */
  --orange-fire: #d94f00;     /* orange plus lumineux */
  --gold-dim: #c68e17;        /* or plus visible */
  --book-cuir: #1f0f00;
  --book-metal: #0f0f0f;
  --paper: #2a1a0e;
  --paper-shadow: #140c06;
  --chain-metal: #333333;
  --flash: #ff6600;           /* orange flashy */
  --portal-inner: #ff4500;    /* orange vif pour l'intérieur */
  --portal-mid: #c00000;      /* rouge moyen */
  --portal-outer: #662200;    /* orange foncé extérieur */
  --ritual-duration: 5s;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #190b33 0, #05030a 55%, #000000 100%);
      color: #f5eaff;
      min-height: 100vh;
      overflow: hidden;
    }
    .ritual-root {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background:
        radial-gradient(circle at 20% 0%, rgba(255,45,113,0.2) 0, transparent 55%),
        radial-gradient(circle at 80% 100%, rgba(176,66,255,0.25) 0, transparent 55%),
        radial-gradient(circle at 50% 50%, rgba(0,0,0,0.95) 0, rgba(0,0,0,1) 70%);
    }
    .ritual-root.invoking { animation: screen-vibration var(--ritual-duration) ease-in-out; }
    @keyframes screen-vibration {
      0%,100% { transform: translate(0,0); }
      5% { transform: translate(2px,-2px); }
      10% { transform: translate(-3px,1px); }
      15% { transform: translate(3px,2px); }
      20% { transform: translate(-2px,-3px); }
      25% { transform: translate(3px,1px); }
      30% { transform: translate(-1px,2px); }
      40% { transform: translate(2px,-1px); }
      50% { transform: translate(0,0); }
      60% { transform: translate(-2px,1px); }
      70% { transform: translate(1px,-2px); }
      80% { transform: translate(-1px,2px); }
      90% { transform: translate(2px,-1px); }
    }
    .starfield {
    position: absolute;
  inset: -20%;
      opacity: 0.12;               /* au lieu de 0.04 */
     background:
    radial-gradient(circle at 10% 20%, rgba(255,102,0,0.25) 0, transparent 40%),
    radial-gradient(circle at 80% 10%, rgba(165,0,0,0.20) 0, transparent 45%),
    radial-gradient(circle at 20% 80%, rgba(217,79,0,0.22) 0, transparent 50%),
    radial-gradient(circle at 70% 70%, rgba(198,142,23,0.18) 0, transparent 45%);
      filter: blur(1px);
      mix-blend-mode: screen;
      animation: star-pulse 14s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }
    @keyframes star-pulse {
      0%,100% { opacity: 0.05; transform: scale(1); }
      50% { opacity: 0.16; transform: scale(1.06); }
    }
    .summoning-circle {
      position: absolute;
      width: 520px;
      height: 520px;
      border-radius: 50%;
     border: 2px solid rgba(217,79,0,0.3);
     background:
    radial-gradient(circle at center, rgba(217,79,0,0.15) 0, transparent 55%),
    conic-gradient(from 0deg, rgba(217,79,0,0.5), rgba(165,0,0,0.45), rgba(198,142,23,0.4), rgba(217,79,0,0.5));
      mix-blend-mode: screen;
      opacity: 0.25;               /* au lieu de 0.10 */
      filter: blur(1px);
      animation: circle-rotate 32s linear infinite;
      pointer-events: none;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
    }
    @keyframes circle-rotate {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    .ritual-root.invoking .summoning-circle {
      animation: circle-surge var(--ritual-duration) ease-out;
      opacity: 0.35;
    }
    @keyframes circle-surge {
      0% { transform: translate(-50%,-50%) scale(0.7) rotate(0deg); opacity: 0; }
      40% { transform: translate(-50%,-50%) scale(1.05) rotate(120deg); opacity: 0.5; }
      100% { transform: translate(-50%,-50%) scale(1.3) rotate(300deg); opacity: 0; }
    }
    .portal {
      position: absolute;
      width: 440px;
      height: 440px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
     filter: drop-shadow(0 0 60px rgba(255,69,0,0.9));
     opacity: 0.8;                /* au lieu de 0.30 */
      transform: translate(-50%, -50%) scale(0.7);
      transition: 0.3s ease-out;
      top: 50%;
      left: 50%;
      z-index: 2;
    }
    .portal-layer {
      position: absolute;
      border-radius: 50%;
      border-style: solid;
      mix-blend-mode: screen;
    
    }
    .portal-inner {
      width: 150px;
      height: 150px;
      border-width: 4px;
      border-color: var(--portal-inner);
     box-shadow: 0 0 35px rgba(255,69,0,1);
      animation: portal-spin-inner 7s linear infinite;
    }
    .portal-mid {
      width: 250px;
      height: 250px;
      border-width: 5px;
    border-color: var(--portal-mid);
    box-shadow: 0 0 50px rgba(192,0,0,0.95);
     animation: portal-spin-mid 12s linear infinite;
    }
    .portal-outer {
      width: 380px;
      height: 380px;
      border-width: 3px;
     border-color: var(--portal-outer);
      box-shadow: 0 0 80px rgba(102,34,0,0.85);
      animation: portal-spin-outer 18s linear infinite;
    }
    @keyframes portal-spin-inner {
      0% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(180deg) scale(1.05); }
      100% { transform: rotate(360deg) scale(1); }
    }
    @keyframes portal-spin-mid {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(-360deg); }
    }
    @keyframes portal-spin-outer {
      0% { transform: rotate(0deg) scale(1); opacity: 0.7; }
      50% { transform: rotate(180deg) scale(1.05); opacity: 1; }
      100% { transform: rotate(360deg) scale(1); opacity: 0.7; }
    }
    .ritual-root.invoking .portal {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
      animation: portal-breath var(--ritual-duration) ease-out;
    }
    @keyframes portal-breath {
      0% { transform: translate(-50%,-50%) scale(0.4); opacity: 0; }
      20% { transform: translate(-50%,-50%) scale(0.85); opacity: 0.7; }
      50% { transform: translate(-50%,-50%) scale(1.05); opacity: 1; }
      80% { transform: translate(-50%,-50%) scale(1); opacity: 0.9; }
      100% { transform: translate(-50%,-50%) scale(0.9); opacity: 0.2; }
    }
    .runes-ring {
      position: absolute;
      width: 320px;
      height: 320px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
     opacity: 0.7;                /* au lieu de 0.20 */
     filter: drop-shadow(0 0 18px rgba(198,142,23,0.9));
      animation: runes-spin 18s linear infinite;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
    }
    @keyframes runes-spin {
      0% { transform: translate(-50%,-50%) rotate(0deg); }
      100% { transform: translate(-50%,-50%) rotate(-360deg); }
    }
    .rune {
      position: absolute;
      font-size: 18px;
     color: rgba(198,142,23,1);   /* or vif */
     text-shadow:
    0 0 10px rgba(255,102,0,0.9),
    0 0 18px rgba(165,0,0,0.85),
    0 0 28px rgba(217,79,0,0.8);
    opacity: 1;
    }
    .rune:nth-child(1) { transform: rotate(0deg) translate(140px); }
    .rune:nth-child(2) { transform: rotate(30deg) translate(140px); }
    .rune:nth-child(3) { transform: rotate(60deg) translate(140px); }
    .rune:nth-child(4) { transform: rotate(90deg) translate(140px); }
    .rune:nth-child(5) { transform: rotate(120deg) translate(140px); }
    .rune:nth-child(6) { transform: rotate(150deg) translate(140px); }
    .rune:nth-child(7) { transform: rotate(180deg) translate(140px); }
    .rune:nth-child(8) { transform: rotate(210deg) translate(140px); }
    .rune:nth-child(9) { transform: rotate(240deg) translate(140px); }
    .rune:nth-child(10) { transform: rotate(270deg) translate(140px); }
    .rune:nth-child(11) { transform: rotate(300deg) translate(140px); }
    .rune:nth-child(12) { transform: rotate(330deg) translate(140px); }
    .ritual-root.invoking .runes-ring {
      opacity: 0.95;
      animation: runes-flare var(--ritual-duration) ease-out;
    }
    @keyframes runes-flare {
      0% { transform: translate(-50%,-50%) scale(0.6) rotate(0deg); opacity: 0; }
      30% { transform: translate(-50%,-50%) scale(1.05) rotate(-90deg); opacity: 1; }
      70% { transform: translate(-50%,-50%) scale(1.15) rotate(-220deg); opacity: 0.6; }
      100% { transform: translate(-50%,-50%) scale(1.4) rotate(-300deg); opacity: 0; }
    }
    .rift {
      position: absolute;
      width: 420px;
      height: 420px;
      border-radius: 50%;
      background:
        radial-gradient(circle at center, rgba(0,0,0,1) 0, rgba(0,0,0,0.95) 40%, transparent 65%);
      mask-image: radial-gradient(circle at center, black 0, black 35%, transparent 65%);
      opacity: 0;
      mix-blend-mode: normal;
      pointer-events: none;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
    }
    .rift::before {
      content: "";
      position: absolute;
      inset: 10%;
      border-radius: 50%;
      border: 2px dashed rgba(255,255,255,0.1);
      box-shadow:
        0 0 12px rgba(255,45,113,0.8),
        0 0 26px rgba(176,66,255,0.9),
        0 0 40px rgba(0,0,0,1);
      opacity: 0.45;
      transform: rotate(8deg);
    }
    .ritual-root.invoking .rift {
      animation: rift-open var(--ritual-duration) cubic-bezier(0.3,0.7,0.2,1);
    }
    @keyframes rift-open {
      0% { opacity: 0; transform: translate(-50%,-50%) scale(0.3); }
      25% { opacity: 0.8; transform: translate(-50%,-50%) scale(0.8); }
      50% { opacity: 1; transform: translate(-50%,-50%) scale(1.05); }
      80% { opacity: 0.7; transform: translate(-50%,-50%) scale(1.1); }
      100% { opacity: 0; transform: translate(-50%,-50%) scale(1.3); }
    }
    .book-wrapper {
      position: absolute;
      bottom: 40px;
      left: 40px;
      width: 360px;
      height: 260px;
      transform-style: preserve-3d;
      transform: perspective(950px) rotateX(24deg) rotateY(-10deg);
      transition: transform 0.6s ease-out, filter 0.4s ease-out;
      z-index: 10;
    }
    .ritual-root.invoking .book-wrapper {
      transform: perspective(950px) rotateX(18deg) rotateY(8deg) scale(1.05);
      filter: drop-shadow(0 0 32px rgba(255,45,113,0.9));
    }
    .book {
      position: absolute;
      inset: 0;
      transform-style: preserve-3d;
    }
    .book-base {
      position: absolute;
      inset: 0;
      border-radius: 10px;
      background:
        linear-gradient(135deg, var(--book-metal) 0, #191320 28%, #302027 45%, var(--book-cuir) 60%, #120d14 100%);
      box-shadow:
        0 22px 40px rgba(0,0,0,0.95),
        0 0 20px rgba(0,0,0,0.9);
      border: 1px solid rgba(255,255,255,0.05);
    }
    .book-core-glow {
      position: absolute;
      inset: 15px;
      border-radius: 10px;
     background:
    radial-gradient(circle at 40% 40%, rgba(165,0,0,0.5) 0, transparent 50%),
    radial-gradient(circle at 70% 70%, rgba(217,79,0,0.45) 0, transparent 55%),
    radial-gradient(circle at 20% 80%, rgba(198,142,23,0.4) 0, transparent 50%);
      mix-blend-mode: screen;
      opacity: 0.6;                /* au lieu de 0.40 ou moins */
      filter: blur(2px);
    }
    .ritual-root.invoking .book-core-glow {
      animation: core-pulse var(--ritual-duration) ease-out;
    }
    @keyframes core-pulse {
      0% { opacity: 0; transform: scale(0.8); }
      20% { opacity: 0.9; transform: scale(1.05); }
      60% { opacity: 0.6; transform: scale(1.08); }
      100% { opacity: 0; transform: scale(1.25); }
    }
    .book-spine {
      position: absolute;
      left: 45%;
      top: 5%;
      bottom: 5%;
      width: 18px;
      background: linear-gradient(to bottom, #05040a, #1b1016, #120912, #05040a);
      box-shadow: 0 0 10px rgba(0,0,0,0.8);
      border-left: 2px solid rgba(255,255,255,0.05);
      border-right: 2px solid rgba(0,0,0,0.9);
    }
    .book-edge {
      position: absolute;
      right: 4%;
      top: 10%;
      bottom: 10%;
      width: 18px;
      background: repeating-linear-gradient(
        to bottom,
        #f7f1dc 0,
        #f7f1dc 3px,
        #e4d9c2 4px,
        #f7f1dc 7px
      );
      border-radius: 0 6px 6px 0;
      box-shadow:
        inset 0 0 4px rgba(0,0,0,0.4),
        0 0 10px rgba(0,0,0,0.95);
    }
    .chain {
      position: absolute;
      height: 3px;
      left: 8%;
      right: 8%;
      top: 30%;
      background: linear-gradient(to right, #888, var(--chain-metal), #bbb);
      box-shadow: 0 0 7px rgba(255,255,255,0.3);
      transform-origin: center;
    }
    .chain:nth-child(2) { top: 50%; }
    .chain:nth-child(3) { top: 70%; }
    .chain::before,
    .chain::after {
      content: "";
      position: absolute;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      border: 2px solid #cfd1d6;
      background: radial-gradient(circle at 30% 30%, #ffffff, #cfd1d6 45%, #91939b 80%);
      top: 50%;
      transform: translateY(-50%);
      box-shadow:
        0 0 6px rgba(255,255,255,0.8),
        0 0 16px rgba(0,0,0,1);
    }
    .chain::before { left: -8px; }
    .chain::after { right: -8px; }
    .ritual-root.invoking .chain {
      animation: chain-break var(--ritual-duration) cubic-bezier(0.3,0.8,0.4,1);
    }
    @keyframes chain-break {
      0% { transform: translateX(0) scaleX(1); opacity: 1; }
      15% { transform: translateX(0) scaleX(1.02); opacity: 1; }
      25% { transform: translateX(2px) scaleX(1.04); }
      35% { transform: translateX(-1px) scaleX(1.06); }
      45% { transform: translateX(0) scaleX(0.9); opacity: 0.9; }
      65% { transform: translateX(40px) scaleX(0.2); opacity: 0.5; }
      100% { transform: translateX(-120px) scaleX(0); opacity: 0; }
    }
    .book-cover-left,
    .book-cover-right {
      position: absolute;
      top: 12%;
      bottom: 12%;
      width: 44%;
      border-radius: 8px;
      background: radial-gradient(circle at 20% 20%, #5e3924 0, #3b2414 28%, #1f120a 65%, #050307 100%);
      box-shadow: inset 0 0 16px rgba(0,0,0,0.85);
      transform-origin: left center;
      backface-visibility: hidden;
      overflow: hidden;
    }
    .book-cover-left { left: 7%; }
    .book-cover-right {
      right: 7%;
      transform-origin: right center;
      transform: rotateY(-2deg);
    }
    .book-metal-frame {
      position: absolute;
      inset: 10px;
      border-radius: 6px;
      border: 2px solid rgba(255,255,255,0.08);
      box-shadow:
        inset 0 0 10px rgba(255,255,255,0.12),
        0 0 16px rgba(0,0,0,0.95);
    }
    .book-sigil {
      position: absolute;
      inset: 26px;
      border-radius: 50%;
      background:
        radial-gradient(circle at 30% 25%, rgba(255,221,102,0.9) 0, rgba(255,221,102,0.2) 26%, transparent 60%),
        conic-gradient(
          from 0deg,
          rgba(255,45,113,0.9),
          rgba(176,66,255,0.9),
          rgba(247,201,107,0.9),
          rgba(255,45,113,0.9)
        );
      mix-blend-mode: screen;
      opacity: 0.9;
      filter: blur(0.3px);
    }
    .book-symbol {
      position: absolute;
      inset: 36px;
      border-radius: 50%;
      border: 1px solid rgba(5,3,6,0.9);
      background:
        radial-gradient(circle at center, rgba(5,3,6,0.9) 0, rgba(5,3,6,0.4) 30%, transparent 60%);
      box-shadow:
        inset 0 0 8px rgba(0,0,0,1),
        0 0 12px rgba(0,0,0,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Cinzel", "Trajan Pro", serif;
      font-weight: 700;
      font-size: 20px;
      letter-spacing: 0.12em;
      color: rgba(247,201,107,0.9);
      text-shadow:
        0 0 6px rgba(247,201,107,0.9),
        0 0 12px rgba(176,66,255,0.8),
        0 0 22px rgba(255,45,113,0.9);
      text-align: center;
    }
    .book-cover-left::before,
    .book-cover-right::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        linear-gradient(135deg, rgba(255,255,255,0.3), transparent 40%, transparent 60%, rgba(0,0,0,0.7));
      opacity: 0.35;
      mix-blend-mode: soft-light;
    }
    .ritual-root.invoking .book-cover-right {
      animation: book-open-right var(--ritual-duration) ease-out forwards;
    }
    .ritual-root.invoking .book-cover-left {
      animation: book-open-left var(--ritual-duration) ease-out forwards;
    }
    @keyframes book-open-right {
      0% { transform: rotateY(-2deg); }
      20% { transform: rotateY(-45deg); }
      40% { transform: rotateY(-75deg); }
      60% { transform: rotateY(-85deg); }
      100% { transform: rotateY(-90deg); opacity: 0; }
    }
    @keyframes book-open-left {
      0% { transform: rotateY(0deg); }
      20% { transform: rotateY(18deg); }
      40% { transform: rotateY(28deg); }
      60% { transform: rotateY(32deg); }
      100% { transform: rotateY(40deg); }
    }
    .page-inner {
      position: absolute;
      inset: 28px 26px;
      background: linear-gradient(135deg, var(--paper), var(--paper-shadow));
      border-radius: 6px;
      padding: 14px 16px 16px 16px;
      color: #2b130b;
      transform: translateZ(12px);
      box-shadow:
        inset 0 0 12px rgba(0,0,0,0.4),
        0 0 12px rgba(0,0,0,0.8);
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      gap: 10px;
      scrollbar-width: thin;
      scrollbar-color: #5b4730 #f7f1dc;
    }
    .page-inner::-webkit-scrollbar { width: 6px; }
    .page-inner::-webkit-scrollbar-track { background: #f7f1dc; }
    .page-inner::-webkit-scrollbar-thumb { background: #5b4730; border-radius: 3px; }
    .page-title {
      font-family: "Cinzel", serif;
      font-weight: 700;
      font-size: 16px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      text-align: center;
      margin-bottom: 4px;
    }
    .page-sub {
      font-size: 10px;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 0.22em;
      color: #5b4730;
      margin-bottom: 6px;
    }
    .link-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }
    .ritual-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(52,34,18,0.45);
      background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(230,218,193,0.9));
      text-decoration: none;
      font-size: 11px;
      color: #2b130b;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      position: relative;
      overflow: hidden;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, border-color 0.15s ease-out;
    }
    .ritual-link span.label { position: relative; z-index: 1; }
    .ritual-link span.tag {
      font-size: 9px;
      opacity: 0.7;
      text-transform: none;
    }
    .ritual-link::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(176,66,255,0.2), rgba(255,45,113,0.25), rgba(247,201,107,0.25));
      opacity: 0;
      transition: opacity 0.18s ease-out;
    }
    .ritual-link:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 10px rgba(0,0,0,0.45);
      border-color: rgba(255,45,113,0.7);
    }
    .ritual-link:hover::before { opacity: 1; }
    .ritual-link:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 0 6px rgba(0,0,0,0.7);
    }
    .ritual-root.invoking .ritual-link {
      pointer-events: none;
      opacity: 0.6;
    }
    .ritual-root.invoking { cursor: wait; }
    .hands {
      position: absolute;
      width: 440px;
      height: 200px;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 5;
    }
    .hand {
      position: absolute;
      width: 48%;
      height: 100%;
      background: radial-gradient(circle at 50% 10%, rgba(0,0,0,0.98) 0, rgba(0,0,0,0.75) 30%, transparent 70%);
      filter: blur(1.2px);
    }
    .hand-left {
      left: -4%;
      transform: rotate(-12deg);
      clip-path: polygon(0 40%, 40% 18%, 65% 25%, 80% 50%, 70% 100%, 0 100%);
    }
    .hand-right {
      right: -4%;
      transform: rotate(12deg);
      clip-path: polygon(100% 40%, 60% 18%, 35% 25%, 20% 50%, 30% 100%, 100% 100%);
    }
    .ritual-root.invoking .hand-left {
      animation: hand-grip-left var(--ritual-duration) ease-out;
    }
    .ritual-root.invoking .hand-right {
      animation: hand-grip-right var(--ritual-duration) ease-out;
    }
    @keyframes hand-grip-left {
      0% { transform: rotate(-16deg) translateX(-8px); opacity: 0.6; }
      30% { transform: rotate(-8deg) translateX(8px); opacity: 1; }
      70% { transform: rotate(-10deg) translateX(4px); opacity: 0.9; }
      100% { transform: rotate(-16deg) translateX(-6px); opacity: 0.2; }
    }
    @keyframes hand-grip-right {
      0% { transform: rotate(16deg) translateX(8px); opacity: 0.6; }
      30% { transform: rotate(8deg) translateX(-8px); opacity: 1; }
      70% { transform: rotate(10deg) translateX(-4px); opacity: 0.9; }
      100% { transform: rotate(16deg) translateX(6px); opacity: 0.2; }
    }
    .flash-overlay {
      position: absolute;
      inset: -5%;
      background:
     background: radial-gradient(circle at center, #ff6600 0, rgba(255,102,0,0.9) 25%, rgba(165,0,0,0.6) 45%, transparent 70%);
      opacity: 0;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: 20;
    }
    .ritual-root.invoking .flash-overlay {
      animation: flash-ritual var(--ritual-duration) ease-out;
    }
    @keyframes flash-ritual {
      0% { opacity: 0; transform: scale(0.6); }
      20% { opacity: 1; transform: scale(1); }
      45% { opacity: 0.6; transform: scale(1.1); }
      70% { opacity: 0.25; transform: scale(1.16); }
      100% { opacity: 0; transform: scale(1.25); }
    }
    .particles {
      position: absolute;
      inset: 0;
      pointer-events: none;
      mix-blend-mode: screen;
      opacity: 0.12;
      z-index: 6;
    }
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
     background: #ff6600;
     box-shadow:
    0 0 18px rgba(255,102,0,1),
    0 0 30px rgba(165,0,0,1),
    0 0 45px rgba(217,79,0,0.9);
      opacity: 0;
    }
    .particle:nth-child(1) { top: 20%; left: 30%; }
    .particle:nth-child(2) { top: 10%; left: 60%; }
    .particle:nth-child(3) { top: 70%; left: 20%; }
    .particle:nth-child(4) { top: 75%; left: 70%; }
    .particle:nth-child(5) { top: 40%; left: 80%; }
    .particle:nth-child(6) { top: 32%; left: 18%; }
    .particle:nth-child(7) { top: 55%; left: 50%; }
    .ritual-root.invoking .particle {
      animation: particle-rise var(--ritual-duration) ease-out;
    }
    @keyframes particle-rise {
      0% { opacity: 0; transform: translateY(20px) scale(0.3); }
      20% { opacity: 1; transform: translateY(-10px) scale(1); }
      60% { opacity: 0.7; transform: translateY(-30px) scale(1.1); }
      100% { opacity: 0; transform: translateY(-60px) scale(1.2); }
    }
    .hint {
      position: absolute;
      bottom: 22px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.22em;
      opacity: 0.55;
      color: #f5eaff;
      z-index: 15;
    }
    .hint strong { color: #ff2d71; font-weight: 700; }
    .ritual-root.invoking .hint { opacity: 0; }

    /* ──────────────────────────────────────────────
       RESPONSIVE
    ────────────────────────────────────────────── */
    @media (max-width: 768px) {
      .portal { width: 320px; height: 320px; }
      .summoning-circle { width: 380px; height: 380px; }
      .runes-ring { width: 260px; height: 260px; }
      .book-wrapper {
        width: 320px;
        height: 280px;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%) perspective(820px) rotateX(26deg) rotateY(0deg);
      }
      .hands {
        width: 340px;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
      }
      .page-inner { padding: 10px 12px; gap: 8px; }
      .link-list { gap: 5px; }
      .ritual-link { font-size: 10.5px; padding: 6px 9px; }
      .page-title { font-size: 14px; }
      .page-sub { font-size: 9px; }
      .hint { font-size: 10px; bottom: 12px; }
    }
    @media (max-width: 480px) {
      .book-wrapper { width: 280px; height: 300px; }
      .ritual-link { font-size: 10px; padding: 5px 8px; }
    }
  </style>
</head>
<body>
  <div class="ritual-root" id="ritualRoot">
    <div class="starfield"></div>
    <div class="summoning-circle"></div>
    <div class="portal">
      <div class="portal-layer portal-outer"></div>
      <div class="portal-layer portal-mid"></div>
      <div class="portal-layer portal-inner"></div>
    </div>
    <div class="rift"></div>
    <div class="runes-ring">
      <div class="rune">ᚦ</div>
      <div class="rune">ᚱ</div>
      <div class="rune">ᚨ</div>
      <div class="rune">ᚹ</div>
      <div class="rune">ᚾ</div>
      <div class="rune">ᚲ</div>
      <div class="rune">ᛉ</div>
      <div class="rune">ᛞ</div>
      <div class="rune">ᛃ</div>
      <div class="rune">ᛟ</div>
      <div class="rune">ᚺ</div>
      <div class="rune">ᛒ</div>
    </div>
    <div class="book-wrapper">
      <div class="book">
        <div class="book-base"></div>
        <div class="book-core-glow"></div>
        <div class="book-spine"></div>
        <div class="book-edge"></div>
        <div class="chain"></div>
        <div class="chain"></div>
        <div class="chain"></div>
        <div class="book-cover-left">
          <div class="book-metal-frame"></div>
          <div class="book-sigil"></div>
          <div class="book-symbol">VORNΛKH</div>
        </div>
        <div class="book-cover-right">
          <div class="book-metal-frame"></div>
          <div class="book-sigil"></div>
          <div class="book-symbol">ΣX&nbsp;INFERNO</div>
        </div>
        <div class="page-inner">
          <div class="page-title">GRIMOIRE D'INVOCATION</div>
          <div class="page-sub">choisis le lien à invoquer</div>
          <div class="link-list">
            <a href="https://www.youtube.com/@Vornakhvt" class="ritual-link">
              <span class="label">YouTube</span>
              <span class="tag">portail vidéo</span>
            </a>
            <a href="https://www.twitch.tv/vornakh" class="ritual-link">
              <span class="label">Twitch</span>
              <span class="tag">rituel en direct</span>
            </a>
            <a href="https://www.youtube.com/channel/UCpinCkc3aQ_irHGqP6plCIw" class="ritual-link">
              <span class="label">Chaîne secondaire</span>
              <span class="tag">rituels annexes</span>
            </a>
            <a href="https://discord.com/invite/aQcES5qbYe" class="ritual-link">
              <span class="label">Discord</span>
              <span class="tag">cercle occulte</span>
            </a>
            <a href="https://www.tiktok.com/@vornakhvt?is_from_webapp=1&sender_device=pc" class="ritual-link">
              <span class="label">TikTok</span>
              <span class="tag">fragments du néant</span>
            </a>
            <a href="https://x.com/vornakh" class="ritual-link">
              <span class="label">X (Twitter)</span>
              <span class="tag">messages interdits</span>
            </a>
            <a href="https://www.instagram.com/vornakhvt/" class="ritual-link">
              <span class="label">Instagram</span>
              <span class="tag">journal du pacte</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="hands">
      <div class="hand hand-left"></div>
      <div class="hand hand-right"></div>
    </div>
    <div class="particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
    <div class="flash-overlay"></div>
    <div class="hint">clique sur un lien du grimoire pour lancer le <strong>rituel</strong></div>
  </div>

  <script>
    (function() {
      const root = document.getElementById('ritualRoot');
   const links = document.querySelectorAll('.ritual-link').forEach(link => {
      let isInvoking = false;
      let ritualTimeout = null;
     link.addEventListener('click', function(e) {
      e.preventDefault();
      const url = this.href;

      function startRitual(url) {
        if (isInvoking) return;
        isInvoking = true;
        root.classList.add('invoking');

        // Ouvre une tab vide immédiatement (évite blocage popup)
        const portal = window.open('about:blank', '_blank', 'noopener,noreferrer');
        
if (currentPortal) {
        // Optionnel : message dans la popup vide pendant le rituel
        currentPortal.document.write(`
          <!DOCTYPE html>
          <html lang="fr">
          <head><meta charset="UTF-8"><title>Invocation...</title></head>
          <body style="margin:0;background:#000;color:#b33c00;font-family:system-ui;text-align:center;padding-top:20vh;">
            <h1 style="font-size:2.5em;margin-bottom:1rem;">Le rituel s'accomplit...</h1>
            <p style="font-size:1.3em;opacity:0.8;">Le portail s'ouvre dans quelques instants.</p>
          </body>
          </html>
        `);
        currentPortal.document.close();
      }

      setTimeout(() => {
        root.classList.remove('invoking');

        if (currentPortal && !currentPortal.closed) {
          currentPortal.location.href = url;
          currentPortal.focus();
        } else {
          // Fallback ultra-rare : même onglet
          window.location.href = url;
        }
      }, 5000);
    });
  });
})();
        if (!portal || portal.closed) {
          // Fallback si popup bloqué
          window.open(url, '_blank');
          root.classList.remove('invoking');
          isInvoking = false;
          return;
        }

        ritualTimeout = setTimeout(() => {
          if (portal && !portal.closed) {
            portal.location.replace(url);
          }
          root.classList.remove('invoking');
          isInvoking = false;
        }, 5000);
      }

      links.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const url = this.getAttribute('href');
          if (url) startRitual(url);
        });
      });

      window.addEventListener('beforeunload', () => {
        if (ritualTimeout) clearTimeout(ritualTimeout);
      });
    })();
  </script>
</body>
</html>
